-- =============================================
-- STEP 1: DROP OLD TABLES (Clean Slate)
-- =============================================
DROP TABLE IF EXISTS patients CASCADE;
DROP TABLE IF EXISTS doctors CASCADE;
DROP TABLE IF EXISTS rooms CASCADE;
DROP TABLE IF EXISTS users CASCADE;

-- 1. Create Users Table
CREATE TABLE users (
    username VARCHAR(50) PRIMARY KEY,
    password VARCHAR(255) NOT NULL,
    role VARCHAR(20) NOT NULL,
    linked_id VARCHAR(50)
);
-- 2. Create Doctors Table
CREATE TABLE doctors (
    doctor_id VARCHAR(50) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    specialization VARCHAR(100)
);
-- 3. Create Rooms Table
CREATE TABLE rooms (
    room_id VARCHAR(20) PRIMARY KEY,
    room_type VARCHAR(50) NOT NULL,
    price DECIMAL(10, 2) DEFAULT 100.00
);
-- 4. Create Patients Table
CREATE TABLE patients (
    patient_id VARCHAR(50) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    age INT,
    address VARCHAR(255),
    medical_history TEXT,
    admission_date DATE,
    room_id VARCHAR(20),
    doctor_id VARCHAR(50),
    FOREIGN KEY (room_id) REFERENCES rooms(room_id) ON DELETE SET NULL,
    FOREIGN KEY (doctor_id) REFERENCES doctors(doctor_id) ON DELETE SET NULL
);
-- 5. Insert Default Admin User
INSERT INTO users (username, password, role, linked_id) 
VALUES ('admin', 'admin123', 'ADMIN', NULL);

